#!/bin/bash
dt(){
		dt="$(date '+%m/%d/%Y %I:%M%p')"
		echo -e " $dt"
}

vol1(){
		vol="$(pamixer --get-volume-human)"
		echo -e " $vol"
}

vol(){
		vol="$(pamixer --get-volume-human)"
		vollev="$(pamixer --get-volume)"
		if [ "${vollev}" -eq "0" ]; then
				vollevbar="::::::::::"
		elif [ "${vollev}" -lt "10" ]; then
				vollevbar="|:::::::::"
		elif [ "${vollev}" -ge "10" ] && [ "${vollev}" -lt "20" ]; then
				vollevbar="|:::::::::"
		elif [ "${vollev}" -ge "20" ] && [ "${vollev}" -lt "30" ]; then
				vollevbar="||::::::::"
		elif [ "${vollev}" -ge "30" ] && [ "${vollev}" -lt "40" ]; then
				vollevbar="|||:::::::"
		elif [ "${vollev}" -ge "40" ] && [ "${vollev}" -lt "50" ]; then
				vollevbar="||||::::::"
		elif [ "${vollev}" -ge "50" ] && [ "${vollev}" -lt "60" ]; then
				vollevbar="|||||:::::"
		elif [ "${vollev}" -ge "60" ] && [ "${vollev}" -lt "70" ]; then
				vollevbar="||||||::::"
		elif [ "${vollev}" -ge "70" ] && [ "${vollev}" -lt "80" ]; then
				vollevbar="|||||||:::"
		elif [ "${vollev}" -ge "80" ] && [ "${vollev}" -lt "90" ]; then
				vollevbar="||||||||::"
		elif [ "${vollev}" -ge "90" ] && [ "${vollev}" -lt "100" ]; then
				vollevbar="|||||||||:"
		elif [ "${vollev}" -eq "100" ]; then
				vollevbar="||||||||||"
		fi
				
		echo -e " ${vollevbar} ${vol}"
}

bat1(){
		FILE=/sys/class/power_supply/BAT0
		if [ -e "$FILE" ]; then
				bat="$(cat $FILE/capacity)%"
				echo -e " ${bat} |"
		fi
}

bat(){
		FILE=/sys/class/power_supply/BAT0
		if [ -e "$FILE" ]; then
				bat="$(cat $FILE/capacity)"
				if [ "${bat}" -lt "10" ]; then
						batbar="|:::::::::"
				elif [ "${bat}" -ge "10" ] && [ "${bat}" -lt "20" ]; then
						batbar="|:::::::::"
				elif [ "${bat}" -ge "20" ] && [ "${bat}" -lt "30" ]; then
						batbar="||::::::::"
				elif [ "${bat}" -ge "30" ] && [ "${bat}" -lt "40" ]; then
						batbar="|||:::::::"
				elif [ "${bat}" -ge "40" ] && [ "${bat}" -lt "50" ]; then
						batbar="||||::::::"
				elif [ "${bat}" -ge "50" ] && [ "${bat}" -lt "60" ]; then
						batbar="|||||:::::"
				elif [ "${bat}" -ge "60" ] && [ "${bat}" -lt "70" ]; then
						batbar="||||||::::"
				elif [ "${bat}" -ge "70" ] && [ "${bat}" -lt "80" ]; then
						batbar="|||||||:::"
				elif [ "${bat}" -ge "80" ] && [ "${bat}" -lt "90" ]; then
						batbar="||||||||::"
				elif [ "${bat}" -ge "90" ] && [ "${bat}" -lt "100" ]; then
						batbar="|||||||||:"
				elif [ "${bat}" -eq "100" ]; then
						batbar="||||||||||"
				fi 
						
				echo -e " ${batbar} ${bat}% |"
		fi
}

wifi(){
		en="$(cat /sys/class/net/en*/operstate)"
		wf="$(cat /sys/class/net/w*/operstate)"
		if [ $en = "up" ]; then
				echo -e ""
		elif [ $wf = "up" ]; then
				wfsig=$(awk '/^\s*w/ {print int($3*100/70)}' /proc/net/wireless)
				echo -e " ${wfsig}%"
		else
				echo -e ""
		fi
}

while true; do
		xsetroot -name "$(bat) $(vol) | $(wifi) | $(dt)"
		sleep 1s
done

